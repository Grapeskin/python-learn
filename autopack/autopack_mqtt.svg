<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="782px" preserveAspectRatio="none" style="width:1015px;height:782px;background:#FFFFFF;" version="1.1" viewBox="0 0 1015 782" width="1015px" zoomAndPan="magnify"><defs><filter height="300%" id="f1gm8gr5wpn2n0" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[99b8db98afdc2c8404e39242ef4c1e65]
class Platform--><rect codeLine="3" fill="#FEFECE" filter="url(#f1gm8gr5wpn2n0)" height="48" id="Platform" style="stroke:#A80036;stroke-width:1.5;" width="80" x="429" y="322.5"/><ellipse cx="444" cy="338.5" fill="#EB937F" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M447.6143,345 L439.8945,345 L439.8945,332.6069 L447.6143,332.6069 L447.6143,334.7651 L442.3433,334.7651 L442.3433,337.438 L447.1162,337.438 L447.1162,339.5962 L442.3433,339.5962 L442.3433,342.8418 L447.6143,342.8418 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="48" x="458" y="343.0352">Platform</text><line style="stroke:#A80036;stroke-width:1.5;" x1="430" x2="508" y1="354.5" y2="354.5"/><line style="stroke:#A80036;stroke-width:1.5;" x1="430" x2="508" y1="362.5" y2="362.5"/><!--MD5=[75c3ed32ed5e16d70c19839950ea16ba]
class EventId--><rect codeLine="4" fill="#FEFECE" filter="url(#f1gm8gr5wpn2n0)" height="48" id="EventId" style="stroke:#A80036;stroke-width:1.5;" width="74" x="544" y="322.5"/><ellipse cx="559" cy="338.5" fill="#EB937F" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M562.6143,345 L554.8945,345 L554.8945,332.6069 L562.6143,332.6069 L562.6143,334.7651 L557.3433,334.7651 L557.3433,337.438 L562.1162,337.438 L562.1162,339.5962 L557.3433,339.5962 L557.3433,342.8418 L562.6143,342.8418 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="42" x="573" y="343.0352">EventId</text><line style="stroke:#A80036;stroke-width:1.5;" x1="545" x2="617" y1="354.5" y2="354.5"/><line style="stroke:#A80036;stroke-width:1.5;" x1="545" x2="617" y1="362.5" y2="362.5"/><!--MD5=[51255159981deef4d2967e1585ccf960]
class EventType--><rect codeLine="5" fill="#FEFECE" filter="url(#f1gm8gr5wpn2n0)" height="48" id="EventType" style="stroke:#A80036;stroke-width:1.5;" width="92" x="653" y="322.5"/><ellipse cx="668" cy="338.5" fill="#EB937F" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M671.6143,345 L663.8945,345 L663.8945,332.6069 L671.6143,332.6069 L671.6143,334.7651 L666.3433,334.7651 L666.3433,337.438 L671.1162,337.438 L671.1162,339.5962 L666.3433,339.5962 L666.3433,342.8418 L671.6143,342.8418 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="60" x="682" y="343.0352">EventType</text><line style="stroke:#A80036;stroke-width:1.5;" x1="654" x2="744" y1="354.5" y2="354.5"/><line style="stroke:#A80036;stroke-width:1.5;" x1="654" x2="744" y1="362.5" y2="362.5"/><!--MD5=[ed6624c6556d5e7b1bd23032162d20b7]
class Client--><rect codeLine="8" fill="#FEFECE" filter="url(#f1gm8gr5wpn2n0)" height="48" id="Client" style="stroke:#A80036;stroke-width:1.5;" width="64" x="330" y="322.5"/><ellipse cx="345" cy="338.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M347.4731,344.6431 Q346.8921,344.9419 346.2529,345.0913 Q345.6138,345.2407 344.9082,345.2407 Q342.4014,345.2407 341.0815,343.5889 Q339.7617,341.937 339.7617,338.8159 Q339.7617,335.6865 341.0815,334.0347 Q342.4014,332.3828 344.9082,332.3828 Q345.6138,332.3828 346.2612,332.5322 Q346.9087,332.6816 347.4731,332.9805 L347.4731,335.7031 Q346.8423,335.1221 346.2488,334.8523 Q345.6553,334.5825 345.0244,334.5825 Q343.6797,334.5825 342.9949,335.6492 Q342.3101,336.7158 342.3101,338.8159 Q342.3101,340.9077 342.9949,341.9744 Q343.6797,343.041 345.0244,343.041 Q345.6553,343.041 346.2488,342.7712 Q346.8423,342.5015 347.4731,341.9204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="32" x="359" y="343.0352">Client</text><line style="stroke:#A80036;stroke-width:1.5;" x1="331" x2="393" y1="354.5" y2="354.5"/><line style="stroke:#A80036;stroke-width:1.5;" x1="331" x2="393" y1="362.5" y2="362.5"/><!--MD5=[dc737fa3c17f3862ff5af1a4871df7c4]
class MessageCallback--><rect codeLine="11" fill="#FEFECE" filter="url(#f1gm8gr5wpn2n0)" height="73.9102" id="MessageCallback" style="stroke:#A80036;stroke-width:1.5;" width="306" x="305" y="463"/><ellipse cx="404.25" cy="479" fill="#A9DCDF" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M404.1133,474.3481 L402.9595,479.4199 L405.2754,479.4199 Z M402.6191,472.1069 L405.6157,472.1069 L408.9609,484.5 L406.5122,484.5 L405.7485,481.437 L402.4697,481.437 L401.7227,484.5 L399.2739,484.5 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="99" x="424.75" y="483.5352">MessageCallback</text><line style="stroke:#A80036;stroke-width:1.5;" x1="306" x2="610" y1="495" y2="495"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="204" x="311" y="509.6348">response_msg_protocol: MsgProtocol</text><line style="stroke:#A80036;stroke-width:1.5;" x1="306" x2="610" y1="515.9551" y2="515.9551"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="294" x="311" y="530.5898">on_message(client, userdata, message: MQTTMessage)</text><!--MD5=[66d690e9a3e247374ee1ea14fa19536b]
class MsgProtocol--><rect codeLine="26" fill="#FEFECE" filter="url(#f1gm8gr5wpn2n0)" height="60.9551" id="MsgProtocol" style="stroke:#A80036;stroke-width:1.5;" width="101" x="774.5" y="599"/><ellipse cx="789.5" cy="615" fill="#A9DCDF" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M789.3633,610.3481 L788.2095,615.4199 L790.5254,615.4199 Z M787.8691,608.1069 L790.8657,608.1069 L794.2109,620.5 L791.7622,620.5 L790.9985,617.437 L787.7197,617.437 L786.9727,620.5 L784.5239,620.5 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="69" x="803.5" y="619.5352">MsgProtocol</text><line style="stroke:#A80036;stroke-width:1.5;" x1="775.5" x2="874.5" y1="631" y2="631"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="74" x="780.5" y="645.6348">String msg_id</text><line style="stroke:#A80036;stroke-width:1.5;" x1="775.5" x2="874.5" y1="651.9551" y2="651.9551"/><!--MD5=[7569d81bf4f7fc861d39df93101d5787]
class SimpleMessageCallback--><rect codeLine="17" fill="#FEFECE" filter="url(#f1gm8gr5wpn2n0)" height="60.9551" id="SimpleMessageCallback" style="stroke:#A80036;stroke-width:1.5;" width="306" x="7" y="599"/><ellipse cx="87.25" cy="615" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M89.7231,621.1431 Q89.1421,621.4419 88.5029,621.5913 Q87.8638,621.7407 87.1582,621.7407 Q84.6514,621.7407 83.3315,620.0889 Q82.0117,618.437 82.0117,615.3159 Q82.0117,612.1865 83.3315,610.5347 Q84.6514,608.8828 87.1582,608.8828 Q87.8638,608.8828 88.5112,609.0322 Q89.1587,609.1816 89.7231,609.4805 L89.7231,612.2031 Q89.0923,611.6221 88.4988,611.3523 Q87.9053,611.0825 87.2744,611.0825 Q85.9297,611.0825 85.2449,612.1492 Q84.5601,613.2158 84.5601,615.3159 Q84.5601,617.4077 85.2449,618.4744 Q85.9297,619.541 87.2744,619.541 Q87.9053,619.541 88.4988,619.2712 Q89.0923,619.0015 89.7231,618.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="137" x="107.75" y="619.5352">SimpleMessageCallback</text><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="312" y1="631" y2="631"/><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="312" y1="639" y2="639"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="294" x="13" y="653.6348">on_message(client, userdata, message: MQTTMessage)</text><!--MD5=[b81a5340824238a94a4505bd6a7cbcad]
class SyncMessageCallback--><rect codeLine="21" fill="#FEFECE" filter="url(#f1gm8gr5wpn2n0)" height="60.9551" id="SyncMessageCallback" style="stroke:#A80036;stroke-width:1.5;" width="306" x="348" y="599"/><ellipse cx="434.75" cy="615" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M437.2231,621.1431 Q436.6421,621.4419 436.0029,621.5913 Q435.3638,621.7407 434.6582,621.7407 Q432.1514,621.7407 430.8315,620.0889 Q429.5117,618.437 429.5117,615.3159 Q429.5117,612.1865 430.8315,610.5347 Q432.1514,608.8828 434.6582,608.8828 Q435.3638,608.8828 436.0112,609.0322 Q436.6587,609.1816 437.2231,609.4805 L437.2231,612.2031 Q436.5923,611.6221 435.9988,611.3523 Q435.4053,611.0825 434.7744,611.0825 Q433.4297,611.0825 432.7449,612.1492 Q432.0601,613.2158 432.0601,615.3159 Q432.0601,617.4077 432.7449,618.4744 Q433.4297,619.541 434.7744,619.541 Q435.4053,619.541 435.9988,619.2712 Q436.5923,619.0015 437.2231,618.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="124" x="455.25" y="619.5352">SyncMessageCallback</text><line style="stroke:#A80036;stroke-width:1.5;" x1="349" x2="653" y1="631" y2="631"/><line style="stroke:#A80036;stroke-width:1.5;" x1="349" x2="653" y1="639" y2="639"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="294" x="354" y="653.6348">on_message(client, userdata, message: MQTTMessage)</text><!--MD5=[54e926448ad8df9948307e9c3b6e24d1]
class RequestMsgProtocol--><rect codeLine="30" fill="#FEFECE" filter="url(#f1gm8gr5wpn2n0)" height="48" id="RequestMsgProtocol" style="stroke:#A80036;stroke-width:1.5;" width="148" x="657" y="720"/><ellipse cx="672" cy="736" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M674.4731,742.1431 Q673.8921,742.4419 673.2529,742.5913 Q672.6138,742.7407 671.9082,742.7407 Q669.4014,742.7407 668.0815,741.0889 Q666.7617,739.437 666.7617,736.3159 Q666.7617,733.1865 668.0815,731.5347 Q669.4014,729.8828 671.9082,729.8828 Q672.6138,729.8828 673.2612,730.0322 Q673.9087,730.1816 674.4731,730.4805 L674.4731,733.2031 Q673.8423,732.6221 673.2488,732.3523 Q672.6553,732.0825 672.0244,732.0825 Q670.6797,732.0825 669.9949,733.1492 Q669.3101,734.2158 669.3101,736.3159 Q669.3101,738.4077 669.9949,739.4744 Q670.6797,740.541 672.0244,740.541 Q672.6553,740.541 673.2488,740.2712 Q673.8423,740.0015 674.4731,739.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="116" x="686" y="740.5352">RequestMsgProtocol</text><line style="stroke:#A80036;stroke-width:1.5;" x1="658" x2="804" y1="752" y2="752"/><line style="stroke:#A80036;stroke-width:1.5;" x1="658" x2="804" y1="760" y2="760"/><!--MD5=[501650e310d05191f306340ff273d96b]
class ResponseMsgProtocol--><rect codeLine="32" fill="#FEFECE" filter="url(#f1gm8gr5wpn2n0)" height="48" id="ResponseMsgProtocol" style="stroke:#A80036;stroke-width:1.5;" width="157" x="840.5" y="720"/><ellipse cx="855.5" cy="736" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M857.9731,742.1431 Q857.3921,742.4419 856.7529,742.5913 Q856.1138,742.7407 855.4082,742.7407 Q852.9014,742.7407 851.5815,741.0889 Q850.2617,739.437 850.2617,736.3159 Q850.2617,733.1865 851.5815,731.5347 Q852.9014,729.8828 855.4082,729.8828 Q856.1138,729.8828 856.7612,730.0322 Q857.4087,730.1816 857.9731,730.4805 L857.9731,733.2031 Q857.3423,732.6221 856.7488,732.3523 Q856.1553,732.0825 855.5244,732.0825 Q854.1797,732.0825 853.4949,733.1492 Q852.8101,734.2158 852.8101,736.3159 Q852.8101,738.4077 853.4949,739.4744 Q854.1797,740.541 855.5244,740.541 Q856.1553,740.541 856.7488,740.2712 Q857.3423,740.0015 857.9731,739.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="125" x="869.5" y="740.5352">ResponseMsgProtocol</text><line style="stroke:#A80036;stroke-width:1.5;" x1="841.5" x2="996.5" y1="752" y2="752"/><line style="stroke:#A80036;stroke-width:1.5;" x1="841.5" x2="996.5" y1="760" y2="760"/><!--MD5=[8e7bee16906abf4d51814b9ca5886f87]
class RequestProtocol--><rect codeLine="35" fill="#FEFECE" filter="url(#f1gm8gr5wpn2n0)" height="99.8203" id="RequestProtocol" style="stroke:#A80036;stroke-width:1.5;" width="127" x="788.5" y="298"/><ellipse cx="804.4" cy="314" fill="#A9DCDF" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M804.2633,309.3481 L803.1095,314.4199 L805.4254,314.4199 Z M802.7691,307.1069 L805.7657,307.1069 L809.1109,319.5 L806.6622,319.5 L805.8985,316.437 L802.6197,316.437 L801.8727,319.5 L799.4239,319.5 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="93" x="818.6" y="318.5352">RequestProtocol</text><line style="stroke:#A80036;stroke-width:1.5;" x1="789.5" x2="914.5" y1="330" y2="330"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="48" x="794.5" y="344.6348">topic: str</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="115" x="794.5" y="357.5898">payload: MsgProtocol</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="40" x="794.5" y="370.5449">qos: int</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="61" x="794.5" y="383.5">retain: bool</text><line style="stroke:#A80036;stroke-width:1.5;" x1="789.5" x2="914.5" y1="389.8203" y2="389.8203"/><!--MD5=[08a5931c6e2f04aefeda067b62615489]
class RobotRequestProtocol--><rect codeLine="41" fill="#FEFECE" filter="url(#f1gm8gr5wpn2n0)" height="48" id="RobotRequestProtocol" style="stroke:#A80036;stroke-width:1.5;" width="159" x="654.5" y="475"/><ellipse cx="669.5" cy="491" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M671.9731,497.1431 Q671.3921,497.4419 670.7529,497.5913 Q670.1138,497.7407 669.4082,497.7407 Q666.9014,497.7407 665.5815,496.0889 Q664.2617,494.437 664.2617,491.3159 Q664.2617,488.1865 665.5815,486.5347 Q666.9014,484.8828 669.4082,484.8828 Q670.1138,484.8828 670.7612,485.0322 Q671.4087,485.1816 671.9731,485.4805 L671.9731,488.2031 Q671.3423,487.6221 670.7488,487.3523 Q670.1553,487.0825 669.5244,487.0825 Q668.1797,487.0825 667.4949,488.1492 Q666.8101,489.2158 666.8101,491.3159 Q666.8101,493.4077 667.4949,494.4744 Q668.1797,495.541 669.5244,495.541 Q670.1553,495.541 670.7488,495.2712 Q671.3423,495.0015 671.9731,494.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="127" x="683.5" y="495.5352">RobotRequestProtocol</text><line style="stroke:#A80036;stroke-width:1.5;" x1="655.5" x2="812.5" y1="507" y2="507"/><line style="stroke:#A80036;stroke-width:1.5;" x1="655.5" x2="812.5" y1="515" y2="515"/><!--MD5=[df68f386bb4694ae075794624fa858d4]
class CallbackProtocol--><rect codeLine="46" fill="#FEFECE" filter="url(#f1gm8gr5wpn2n0)" height="86.8652" id="CallbackProtocol" style="stroke:#A80036;stroke-width:1.5;" width="185" x="101.5" y="304.5"/><ellipse cx="142.6" cy="320.5" fill="#A9DCDF" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M142.4633,315.8481 L141.3095,320.9199 L143.6254,320.9199 Z M140.9691,313.6069 L143.9657,313.6069 L147.3109,326 L144.8622,326 L144.0985,322.937 L140.8197,322.937 L140.0727,326 L137.6239,326 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="95" x="162.4" y="325.0352">CallbackProtocol</text><line style="stroke:#A80036;stroke-width:1.5;" x1="102.5" x2="285.5" y1="336.5" y2="336.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="48" x="107.5" y="351.1348">topic: str</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="173" x="107.5" y="364.0898">callback_class: MessageCallback</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="40" x="107.5" y="377.0449">qos: int</text><line style="stroke:#A80036;stroke-width:1.5;" x1="102.5" x2="285.5" y1="383.3652" y2="383.3652"/><!--MD5=[e00599bc12c72b17a9d785457bffce05]
class RobotCallbackProtocol--><rect codeLine="51" fill="#FEFECE" filter="url(#f1gm8gr5wpn2n0)" height="48" id="RobotCallbackProtocol" style="stroke:#A80036;stroke-width:1.5;" width="161" x="100.5" y="475"/><ellipse cx="115.5" cy="491" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M117.9731,497.1431 Q117.3921,497.4419 116.7529,497.5913 Q116.1138,497.7407 115.4082,497.7407 Q112.9014,497.7407 111.5815,496.0889 Q110.2617,494.437 110.2617,491.3159 Q110.2617,488.1865 111.5815,486.5347 Q112.9014,484.8828 115.4082,484.8828 Q116.1138,484.8828 116.7612,485.0322 Q117.4087,485.1816 117.9731,485.4805 L117.9731,488.2031 Q117.3423,487.6221 116.7488,487.3523 Q116.1553,487.0825 115.5244,487.0825 Q114.1797,487.0825 113.4949,488.1492 Q112.8101,489.2158 112.8101,491.3159 Q112.8101,493.4077 113.4949,494.4744 Q114.1797,495.541 115.5244,495.541 Q116.1553,495.541 116.7488,495.2712 Q117.3423,495.0015 117.9731,494.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="129" x="129.5" y="495.5352">RobotCallbackProtocol</text><line style="stroke:#A80036;stroke-width:1.5;" x1="101.5" x2="260.5" y1="507" y2="507"/><line style="stroke:#A80036;stroke-width:1.5;" x1="101.5" x2="260.5" y1="515" y2="515"/><!--MD5=[4c454e663102570c6d5b86957ebc12c1]
class SubInterface--><rect codeLine="56" fill="#FEFECE" filter="url(#f1gm8gr5wpn2n0)" height="60.9551" id="SubInterface" style="stroke:#A80036;stroke-width:1.5;" width="135" x="152.5" y="7"/><ellipse cx="181.9" cy="23" fill="#A9DCDF" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M181.7633,18.3481 L180.6095,23.4199 L182.9254,23.4199 Z M180.2691,16.1069 L183.2657,16.1069 L186.6109,28.5 L184.1622,28.5 L183.3985,25.437 L180.1197,25.437 L179.3727,28.5 L176.9239,28.5 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="71" x="199.1" y="27.5352">SubInterface</text><line style="stroke:#A80036;stroke-width:1.5;" x1="153.5" x2="286.5" y1="39" y2="39"/><line style="stroke:#A80036;stroke-width:1.5;" x1="153.5" x2="286.5" y1="47" y2="47"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="123" x="158.5" y="61.6348">sub(callback_protocol)</text><!--MD5=[14d467d8e8ff0114e656d1ce9bf43889]
class AsyncPubInterface--><rect codeLine="62" fill="#FEFECE" filter="url(#f1gm8gr5wpn2n0)" height="60.9551" id="AsyncPubInterface" style="stroke:#A80036;stroke-width:1.5;" width="272" x="347" y="7"/><ellipse cx="426.25" cy="23" fill="#A9DCDF" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M426.1133,18.3481 L424.9595,23.4199 L427.2754,23.4199 Z M424.6191,16.1069 L427.6157,16.1069 L430.9609,28.5 L428.5122,28.5 L427.7485,25.437 L424.4697,25.437 L423.7227,28.5 L421.2739,28.5 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="105" x="446.75" y="27.5352">AsyncPubInterface</text><line style="stroke:#A80036;stroke-width:1.5;" x1="348" x2="618" y1="39" y2="39"/><line style="stroke:#A80036;stroke-width:1.5;" x1="348" x2="618" y1="47" y2="47"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="260" x="353" y="61.6348">async_pub(request_protocol, callback_protocol)</text><!--MD5=[f8c63459f98cb61e17c4af90d53fdd07]
class SyncPubInterface--><rect codeLine="69" fill="#FEFECE" filter="url(#f1gm8gr5wpn2n0)" height="60.9551" id="SyncPubInterface" style="stroke:#A80036;stroke-width:1.5;" width="346" x="654" y="7"/><ellipse cx="774.25" cy="23" fill="#A9DCDF" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M774.1133,18.3481 L772.9595,23.4199 L775.2754,23.4199 Z M772.6191,16.1069 L775.6157,16.1069 L778.9609,28.5 L776.5122,28.5 L775.7485,25.437 L772.4697,25.437 L771.7227,28.5 L769.2739,28.5 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="97" x="794.75" y="27.5352">SyncPubInterface</text><line style="stroke:#A80036;stroke-width:1.5;" x1="655" x2="999" y1="39" y2="39"/><line style="stroke:#A80036;stroke-width:1.5;" x1="655" x2="999" y1="47" y2="47"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="334" x="660" y="61.6348">sync_pub(request_protocol,callback_protocol, timeout) -&gt; str</text><!--MD5=[0ca1291e7e05819b08ea60e28ea074be]
class MqttClientV1--><rect codeLine="76" fill="#FEFECE" filter="url(#f1gm8gr5wpn2n0)" height="99.8203" id="MqttClientV1" style="stroke:#A80036;stroke-width:1.5;" width="346" x="374" y="132"/><ellipse cx="505.75" cy="148" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M508.2231,154.1431 Q507.6421,154.4419 507.0029,154.5913 Q506.3638,154.7407 505.6582,154.7407 Q503.1514,154.7407 501.8315,153.0889 Q500.5117,151.437 500.5117,148.3159 Q500.5117,145.1865 501.8315,143.5347 Q503.1514,141.8828 505.6582,141.8828 Q506.3638,141.8828 507.0112,142.0322 Q507.6587,142.1816 508.2231,142.4805 L508.2231,145.2031 Q507.5923,144.6221 506.9988,144.3523 Q506.4053,144.0825 505.7744,144.0825 Q504.4297,144.0825 503.7449,145.1492 Q503.0601,146.2158 503.0601,148.3159 Q503.0601,150.4077 503.7449,151.4744 Q504.4297,152.541 505.7744,152.541 Q506.4053,152.541 506.9988,152.2712 Q507.5923,152.0015 508.2231,151.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="74" x="526.25" y="152.5352">MqttClientV1</text><line style="stroke:#A80036;stroke-width:1.5;" x1="375" x2="719" y1="164" y2="164"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="156" x="380" y="178.6348">client: paho.mqtt.client.Client</text><line style="stroke:#A80036;stroke-width:1.5;" x1="375" x2="719" y1="184.9551" y2="184.9551"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="123" x="380" y="199.5898">sub(callback_protocol)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="260" x="380" y="212.5449">async_pub(request_protocol, callback_protocol)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="334" x="380" y="225.5">sync_pub(request_protocol,callback_protocol, timeout) -&gt; str</text><!--MD5=[d775c9bfce6b6e089645b1b271009726]
reverse link MessageCallback to MsgProtocol--><path codeLine="15" d="M623.65,511.25 C627.8,518.68 627.4,531.07 637,539 C678.1,572.96 734.25,597.5 774.46,612.2 " fill="none" id="MessageCallback-backto-MsgProtocol" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="612,505,615.3978,511.3604,622.5758,510.6703,619.178,504.3099,612,505" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[35850917f9b824a752a8572a99042f89]
reverse link MessageCallback to SimpleMessageCallback--><path d="M348.9,547.04 C308.61,564.42 264.11,583.61 228.43,598.99 " fill="none" id="MessageCallback-backto-SimpleMessageCallback" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="346.24,540.57,367.38,539.08,351.78,553.42,346.24,540.57" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[ae19f4cac6a0daf9597fb2b3ec1a9b30]
reverse link MessageCallback to SyncMessageCallback--><path d="M477.58,558.5 C482.25,572.48 487.06,586.83 491.08,598.87 " fill="none" id="MessageCallback-backto-SyncMessageCallback" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="470.84,560.44,471.14,539.25,484.12,556,470.84,560.44" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[af7cb1ed21d055199bab586b3ae6fd50]
reverse link MsgProtocol to RequestMsgProtocol--><path d="M787.19,675.75 C774.6,690.81 761.11,706.97 750.49,719.67 " fill="none" id="MsgProtocol-backto-RequestMsgProtocol" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="782.11,670.92,800.3,660.06,792.85,679.89,782.11,670.92" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[67e96deb7f30ecd3609d72b2cc91638b]
reverse link MsgProtocol to ResponseMsgProtocol--><path d="M862.81,675.75 C875.4,690.81 888.89,706.97 899.51,719.67 " fill="none" id="MsgProtocol-backto-ResponseMsgProtocol" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="857.15,679.89,849.7,660.06,867.89,670.92,857.15,679.89" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[84755d181ecbe9bdae05f7f32c2fa4e1]
reverse link RequestProtocol to RobotRequestProtocol--><path d="M798.82,415.33 C782.1,436.65 764.75,458.78 752.22,474.77 " fill="none" id="RequestProtocol-backto-RobotRequestProtocol" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="793.54,410.71,811.39,399.29,804.56,419.35,793.54,410.71" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[944633779246c877cb2677da7c82c8a1]
reverse link RequestProtocol to MsgProtocol--><path codeLine="43" d="M930.05,353.63 C1008.97,368.7 897.96,531.1 847.6,598.96 " fill="none" id="RequestProtocol-backto-MsgProtocol" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="917,352.5,922.6352,356.9994,928.9559,353.5282,923.3207,349.0288,917,352.5" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[ee1c8365ce74df778d7e9f2440d7dafc]
reverse link CallbackProtocol to RobotCallbackProtocol--><path d="M188.36,412.78 C186.45,434.85 184.45,458.08 183.01,474.7 " fill="none" id="CallbackProtocol-backto-RobotCallbackProtocol" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="181.4,411.98,190.1,392.65,195.35,413.18,181.4,411.98" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[a2229efa62bba7ac00ce892a175eac76]
reverse link CallbackProtocol to MessageCallback--><path codeLine="53" d="M299.8,364.54 C304.44,372.96 302.03,388.4 312,399 C333.62,421.97 361.47,442.49 387.05,458.8 " fill="none" id="CallbackProtocol-backto-MessageCallback" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="288,358.5,291.516,364.7958,298.6799,363.9718,295.1639,357.6759,288,358.5" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[98cec828f68ef49c939a6aaa4483cd90]
link SubInterface to CallbackProtocol--><path codeLine="59" d="M217.48,68.22 C213.03,120.76 203.73,230.61 198.26,295.15 " fill="none" id="SubInterface-to-CallbackProtocol" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="197.81,300.49,202.5415,291.8521,198.224,295.5072,194.569,291.1897,197.81,300.49" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[eb733f52280d117782f732f36864c1e8]
link AsyncPubInterface to RequestProtocol--><path codeLine="65" d="M619.03,62.87 C663.46,76.19 710.46,96.66 746,128 C794.13,170.44 822.56,239.67 837.67,288.61 " fill="none" id="AsyncPubInterface-to-RequestProtocol" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="839.18,293.58,840.3851,283.8051,837.7236,288.7968,832.732,286.1353,839.18,293.58" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[57f9cdae2e93d19a3ae45beba8e208e5]
link AsyncPubInterface to CallbackProtocol--><path codeLine="66" d="M381.96,68.08 C348.39,81.91 313,101.36 287,128 C241.52,174.6 216.7,246.91 204.4,295.2 " fill="none" id="AsyncPubInterface-to-CallbackProtocol" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="203.17,300.09,209.2334,292.3289,204.3827,295.2393,201.4723,290.3886,203.17,300.09" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[1b965c328b38e59561032f667148fe50]
link SyncPubInterface to RequestProtocol--><path codeLine="72" d="M829.42,68.22 C833.56,119.11 842.09,223.75 847.39,288.93 " fill="none" id="SyncPubInterface-to-RequestProtocol" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="847.8,293.94,851.041,284.6397,847.386,288.9572,843.0685,285.3021,847.8,293.94" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[f72a2ca6ce5c707b30caa9d303da0fa7]
link SyncPubInterface to CallbackProtocol--><path codeLine="73" d="M653.72,67.51 C521.95,90.11 361.04,119.09 348,128 C302.17,159.3 313.91,188.59 282,234 C267.37,254.82 250.23,276.97 234.99,296 " fill="none" id="SyncPubInterface-to-CallbackProtocol" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="231.57,300.26,240.3218,295.7427,234.6987,296.3598,234.0815,290.7368,231.57,300.26" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[ed94640f5d260ef85aa20fa20ddd6e27]
reverse link SubInterface to MqttClientV1--><path d="M306.35,75.87 C343.21,91.81 386.85,110.7 426.78,127.98 " fill="none" id="SubInterface-backto-MqttClientV1" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="303.33,82.19,287.75,67.82,308.89,69.34,303.33,82.19" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[a3fcc4fa9bf07fdd7088c7490d9a21b0]
reverse link AsyncPubInterface to MqttClientV1--><path d="M504.72,86.52 C510.72,99.8 517.27,114.28 523.38,127.79 " fill="none" id="AsyncPubInterface-backto-MqttClientV1" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="498.28,89.27,496.42,68.16,511.04,83.5,498.28,89.27" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[802cb91d3bd849f983d6b2c9f2ead4ec]
reverse link SyncPubInterface to MqttClientV1--><path d="M750.28,77.27 C719.35,92.9 683.21,111.17 650.04,127.93 " fill="none" id="SyncPubInterface-backto-MqttClientV1" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="747.3,70.94,768.3,68.16,753.61,83.43,747.3,70.94" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[ce1178871b9b3391c162ca837fd40ba4]
reverse link MqttClientV1 to Client--><path codeLine="83" d="M361.9,180.84 C346.44,204.4 353.86,282.87 358.8,322.37 " fill="none" id="MqttClientV1-backto-Client" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="373,174,365.7935,173.7426,362.7842,180.2958,369.9907,180.5532,373,174" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[ac889fa27261100909bb675f5d82b8ed]
link MqttClientV1 to Platform--><path codeLine="84" d="M522.11,234.18 C508.87,261.93 493.13,294.92 482.24,317.75 " fill="none" id="MqttClientV1-to-Platform" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="479.99,322.47,487.4795,316.0741,482.1458,317.9586,480.2613,312.6249,479.99,322.47" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[8f1d15cfe95675b20d35dca0a93251aa]
link MqttClientV1 to EventId--><path codeLine="85" d="M557.85,234.18 C563.6,261.81 570.43,294.65 575.17,317.47 " fill="none" id="MqttClientV1-to-EventId" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="576.21,322.47,578.2758,312.8402,575.1828,317.5766,570.4464,314.4837,576.21,322.47" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[52f4de7d4673d8f4c7f3786eb0e36c7b]
link MqttClientV1 to EventType--><path codeLine="86" d="M595.51,234.18 C621.63,262.28 652.75,295.75 674,318.61 " fill="none" id="MqttClientV1-to-EventType" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="677.59,322.47,674.3721,313.1617,674.1779,318.8152,668.5244,318.621,677.59,322.47" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[d8fa23d69fb82d2fcc3a586bb61c73c4]
link MqttClientV1 to RequestProtocol--><path codeLine="87" d="M649.7,234.02 C685.72,252.59 726.33,273.9 763,294 C767.23,296.32 771.55,298.72 775.91,301.16 " fill="none" id="MqttClientV1-to-RequestProtocol" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="780.27,303.61,774.3955,295.7049,775.9148,301.1539,770.4658,302.6733,780.27,303.61" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[3c5568896940ff5594b66961ba906c03]
link MqttClientV1 to CallbackProtocol--><path codeLine="88" d="M434.34,234.18 C389.95,254.74 339.34,278.18 296.04,298.24 " fill="none" id="MqttClientV1-to-CallbackProtocol" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="291.34,300.41,301.1878,300.2644,295.8785,298.312,297.831,293.0028,291.34,300.41" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[8ba87f296581e6813efff8b95ecd80c1]
@startuml
'https://plantuml.com/class-diagram
'枚举
enum Platform
enum EventId
enum EventType

'mqtt连接对象
class Client

'回调
abstract class MessageCallback{
    response_msg_protocol: MsgProtocol
    on_message(client, userdata, message: MQTTMessage)
}
MessageCallback::response_msg_protocol o- - MsgProtocol

class SimpleMessageCallback extends MessageCallback{
    on_message(client, userdata, message: MQTTMessage)
}

class SyncMessageCallback extends MessageCallback{
    on_message(client, userdata, message: MQTTMessage)
}

'消息
abstract class MsgProtocol{
    String msg_id
}

class RequestMsgProtocol extends MsgProtocol

class ResponseMsgProtocol extends MsgProtocol

'请求协议
abstract class RequestProtocol{
    topic: str
    payload: MsgProtocol
    qos: int
    retain: bool
}
class RobotRequestProtocol extends RequestProtocol

RequestProtocol::payload o- - MsgProtocol

'回调协议
abstract class CallbackProtocol{
    topic: str
    callback_class: MessageCallback
    qos: int
}
class RobotCallbackProtocol extends CallbackProtocol

CallbackProtocol::callback_class o- - MessageCallback

'订阅接口
abstract class SubInterface {
    sub(callback_protocol)
}
SubInterface - -> CallbackProtocol

'异步请求接口
abstract class  AsyncPubInterface{
    async_pub(request_protocol, callback_protocol)
}
AsyncPubInterface - -> RequestProtocol
AsyncPubInterface - -> CallbackProtocol

'同步请求接口
abstract class SyncPubInterface {
    sync_pub(request_protocol,callback_protocol, timeout) -> str
}
SyncPubInterface - -> RequestProtocol
SyncPubInterface - -> CallbackProtocol

'客户端实例
class MqttClientV1 implements SubInterface, AsyncPubInterface, SyncPubInterface{
    client: paho.mqtt.client.Client
    sub(callback_protocol)
    async_pub(request_protocol, callback_protocol)
    sync_pub(request_protocol,callback_protocol, timeout) -> str
}

MqttClientV1::client *- - Client
MqttClientV1 - -> Platform
MqttClientV1 - -> EventId
MqttClientV1 - -> EventType
MqttClientV1 - -> RequestProtocol
MqttClientV1 - -> CallbackProtocol


@enduml

@startuml
enum Platform
enum EventId
enum EventType

class Client

abstract class MessageCallback{
    response_msg_protocol: MsgProtocol
    on_message(client, userdata, message: MQTTMessage)
}
MessageCallback::response_msg_protocol o- - MsgProtocol

class SimpleMessageCallback extends MessageCallback{
    on_message(client, userdata, message: MQTTMessage)
}

class SyncMessageCallback extends MessageCallback{
    on_message(client, userdata, message: MQTTMessage)
}

abstract class MsgProtocol{
    String msg_id
}

class RequestMsgProtocol extends MsgProtocol

class ResponseMsgProtocol extends MsgProtocol

abstract class RequestProtocol{
    topic: str
    payload: MsgProtocol
    qos: int
    retain: bool
}
class RobotRequestProtocol extends RequestProtocol

RequestProtocol::payload o- - MsgProtocol

abstract class CallbackProtocol{
    topic: str
    callback_class: MessageCallback
    qos: int
}
class RobotCallbackProtocol extends CallbackProtocol

CallbackProtocol::callback_class o- - MessageCallback

abstract class SubInterface {
    sub(callback_protocol)
}
SubInterface - -> CallbackProtocol

abstract class  AsyncPubInterface{
    async_pub(request_protocol, callback_protocol)
}
AsyncPubInterface - -> RequestProtocol
AsyncPubInterface - -> CallbackProtocol

abstract class SyncPubInterface {
    sync_pub(request_protocol,callback_protocol, timeout) -> str
}
SyncPubInterface - -> RequestProtocol
SyncPubInterface - -> CallbackProtocol

class MqttClientV1 implements SubInterface, AsyncPubInterface, SyncPubInterface{
    client: paho.mqtt.client.Client
    sub(callback_protocol)
    async_pub(request_protocol, callback_protocol)
    sync_pub(request_protocol,callback_protocol, timeout) -> str
}

MqttClientV1::client *- - Client
MqttClientV1 - -> Platform
MqttClientV1 - -> EventId
MqttClientV1 - -> EventType
MqttClientV1 - -> RequestProtocol
MqttClientV1 - -> CallbackProtocol


@enduml

PlantUML version 1.2022.1(Wed Feb 02 02:19:58 CST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: zh
Country: CN
--></g></svg>
